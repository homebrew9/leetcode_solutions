from typing import List
from sortedcontainers import SortedList

class Solution:
    def maxSlidingWindow(self, nums: List[int], k: int) -> List[int]:
        sl = SortedList()
        res = list()
        i = 0
        while i < k:
            sl.add(nums[i])
            i += 1
        res.append(sl[-1])
        while i < len(nums):
            sl.remove(nums[i-k])
            sl.add(nums[i])
            res.append(sl[-1])
            i += 1
        return res

# Main section
for nums, k in [
                  ([1,3,-1,-3,5,3,6,7], 3),
                  ([1], 1),
                  ([1,2], 1),
                  ([1,2], 2),
                  ([1,2,3], 1),
                  ([1,2,3], 2),
                  ([1,2,3], 3),
                  ([1,2,3,4,5], 1),
                  ([1,2,3,4,5], 2),
                  ([1,2,3,4,5], 3),
                  ([1,2,3,4,5], 4),
                  ([1,2,3,4,5], 5),
                  ([964,-187,294,968,-689,793,-897,41,-587,182,-946,438,-859,-615,85,-314,53,43,190,388,594,168,-689,-496,955,373,-376,-933,215,286,401,-76,-500,816,231,-529,-328,658,986,-114,-408,-228,793,386,-914,483,-246,621,-781,-240,-91,763,-822,972,862,-927,-489,555,-730,-187,-382,866,71,373,269,265,-689,-548,232,-607,993,-962,-402,680,279,-698,-230,-753,687,547,694,-469,755,258,-680,-814,46,687,582,705,233,-756,752,-951,346,839,770,518,843,-740], 29),
               ]:
    print(f'nums, k = {nums}, {k}')
    sol = Solution()
    r = sol.maxSlidingWindow(nums, k)
    print(f'r = {r}')
    print('=================')

