from typing import List

class Solution:
    def candy(self, ratings: List[int]) -> int:
        N = len(ratings)
        res = [1] * N
        for i in range(1, N):
            if ratings[i] > ratings[i-1]:
                res[i] = res[i-1] + 1
        for i in range(N-2, -1, -1):
            if ratings[i] > ratings[i+1]:
                if res[i] <= res[i+1]:
                    res[i] = res[i+1] + 1
        return sum(res)

# Main section
for ratings in [
                  [1,0,2],
                  [1,2,2],
                  [0,1,2,3,4,5,6],
                  [6,5,4,3,2,1,0],
                  [0,58,59,37,63,23,19,15,63,73,51,51,1,66,71,28,16,75,20,34,23,27,46,16,24,47,48,36,77,2,61,19,10,65,34,73,76,34,13,33,59,12,85,56,44,11,95,57,70,26],
                  [1],
                  [1,2],
                  [2,1],
                  [0,1,2],
                  [0,0,0],
                  [2,1,0],
                  [29,45,100,19,50,27,75,6,15,61,4,41,52,71,50,1,79,5,39,48,16,30,27,23,93,55,90,8,47,10,84,17,77,78,87,4,34,32,82,100,95,66,18,30,8,24,95,71,65,41,27,89,42,46,8,6,22,25,25,53,81,67,25,15,97,19,4,100,40,38,7,91,43,84,76,90,7,54,60,63,84,44,69,26,13,7,91,21,69,52,21,95,80,23,96,8,58,72,66,6],
                  #[94,31,81,77,85,37,87,100,46,28,69,52,36,58,92,4,43,87,27,52,18,67,56,36,11,81,34,18,78,12,77,61,57,17,95,0,70,45,93,20,92,6,11,62,41,67,88,63,4,86,6,64,65,79,17,46,42,96,4,57,85,17,93,14,17,80,64,24,76,98,54,3,38,73,95,93,83,16,11,24,49,23,6,92,92,44,49,14,73,75,45,27,52,62,54,27,23,0,99,99,29,11,47,87,5,42,50,94,51,48,97,67,60,12,9,43,27,31,54,47,25,60,89,43,38,58,2,45,38,45,65,62,21,73,88,75,31,85,24,20,76,70,66,11,33,86,42,80,65,48,8,64,98,48,83,99,24,6,89,77,78,9,95,11,39,2,29,93,13,34,23,29,93,11,45,89,82,21,67,46,70,4,66,28,78,82,73,0,48,59,84,34,32,95,28,17,78,40,39,49,16,67,17,22,39,1,66,70,25,50,48,23,89,97,37,17,34,83,8,79,52,57,48,53,95,54,63,85,90,52,43,94,54,73,3,21,63,1,30,0,8,9,83,89,34,18,38,94,92,25,49,69,78,68,76,91,73,73,13,83,100,32,46,99,1,2,79,92,8,76,6,7,21,88,44,47,83,27,24,22,11,40,4,55,1,31,26,59,56,17,3,57,24,3,4,63,70,62,95,42,39,59,79,32,37,86,34,49,85,92,79,15,80,26,70,5,85,87,7,1,32,72,33,61,77,18,61,3,57,59,43,87,91,55,1,71,38,37,89,5,5,24,13,73,74,17,38,24,99,44,32,67,41,40,89,29,50,59,0,82,35,45,18,94,69,46,89,31,42,57,47,63,80,73,5,89,86,44,59,78,8,19,40,58,2,96,78,85,75,37,64,48,50,55,86,31,77,10,29,73,13,90,66,15,16,73,14,28,33,64,40,66,56,48,80,90,19,9,100,76,52,12,2,100,0,92,90,68,33,67,28,4,69,34,94,6,34,72,60,96,38,54,74,40,21,77,78,58,52,62,71,56,49,37,20,37,11,99,36,22,13,12,53,36,45,54,5,28,1,8,15,47,17,3,55,31,41,20,99,51,32,75,36,25,24,76,79,36,80,21,19,99,5,71,33,23,41,43,22,47,41,27,29,73,13,20,39,45,37,84,28,58,70,15,8,1,94,100,9,8,19,33,68,63,42,66,38,50,1,98,10,2,17,24,29,68,81,55,88,9,26,68,42,83,40,63,42,17,25,64,54,30,28,63,64,4,89,58,8,45,92,2,77,75,99,46,41,9,4,87,89,43,70,23,26,51,52,94,65,17,7,60,15,82,41,22,58,7,51,10,59,6,76,43,50,54,100,77,99,0,12,87,18,81,62,34,14,64,59,4,54,17,27,25,97,53,55,62,28,57,17,0,87,17,15,14,98,68,43,95,88,40,46,62,37,19,55,52,81,37,35,32,64,54,77,16,54,66,65,52,5,64,25,49,51,17,94,74,48,19,65,33,91,87,13,52,42,15,91,46,63,49,89,83,51,35,84,9,33,76,23,89,90,45,79,83,35,91,52,67,78,26,53,100,91,42,14,98,6,99,89,31,6,6,76,80,93,78,15,45,90,16,61,96,79,54,43,94,49,73,32,67,78,31,44,74,87,40,53,37,82,58,72,60,16,30,58,40,21,86,4,23,36,77,28,3,56,59,82,18,15,88,9,77,24,6,90,86,6,60,81,24,92,74,46,62,73,10,64,23,36,51,60,30,96,72,66,32,63,27,52,48,58,29,13,22,74,5,12,44,21,90,76,98,36,37,78,87,25,70,13,10,100,0,51,57,18,42,14,90,21,10,56,55,66,64,28,35,98,4,52,49,12,6,66,10,21,35,3,35,86,35,19,87,2,79,61,62,60,71,58,83,49,61,57,87,34,70,80,100,40,40,61,88,48,46,32,75,99,79,49,42,50,67,53,91,70,10,64,71,71,79,57,77,8,86,37,90,48,10,59,4,84,59,27,3,57,82,73,4,79,72,69,33,12,78,84,61,47,82,44,35,77,57,89,19,8,11,57,98,18,64,5,43,26,27,46,37,68,31,11,68,26,16,27,51,11,18,50,49,67,65,67,89,58,92,24,37,0,68,86,73,100,66,67,95,48,51,22,91,92,74,47,79,33,2,30,65,97,18,31,76,21,44,39,21,94,69,27,11,14,18,54,82,39,11,70,53,45,16,66,29,0,8,14,79,93,62,4,43,24,99,82,0,50,64,42,59,13,4],
                  #[881,377,58,161,107,79,93,211,952,878,602,47,13,38,436,959,4,495,987,429,968,59,58,464,69,200,133,732,760,376,365,846,482,982,314,497,272,265,734,419,959,155,310,146,310,565,528,206,774,586,814,830,296,169,962,587,146,322,582,319,529,167,168,336,938,878,117,852,915,419,397,460,21,174,699,143,500,449,103,502,571,633,556,79,634,849,903,750,315,454,434,856,313,205,766,575,420,153,32,829,298,828,347,575,137,707,628,40,438,325,54,799,761,827,444,180,634,228,220,302,467,207,274,724,460,218,247,183,36,522,70,373,829,185,344,182,879,503,29,811,845,956,378,973,613,522,145,444,983,322,882,680,535,385,615,430,683,160,31,440,182,763,562,712,593,970,92,489,267,736,915,737,627,166,199,817,335,550,967,343,552,380,708,27,703,789,216,26,679,805,960,265,807,277,799,838,831,481,377,812,758,431,899,565,567,919,271,49,232,424,296,378,953,503,843,382,676,26,588,964,0,565,519,835,147,416,955,822,402,431,133,993,372,953,392,628,85,49,579,497,494,368,485,783,438,698,77,158,68,631,538,642,971,443,998,531,665,18,767,683,898,56,999,295,650,55,715,497,156,772,219,656,673,177,579,987,265,649,946,272,32,779,56,302,134,418,696,101,289,40,743,930,170,885,440,290,960,113,273,105,624,574,783,223,137,712,696,597,370,729,885,781,604,122,864,400,15,412,153,536,67,583,313,34,706,345,359,54,951,846,865,450,877,283,47,299,803,674,606,918,412,457,342,313,975,86,349,796,224,158,494,504,750,892,706,128,280,504,295,494,681,271,24,291,765,171,679,611,485,702,46,914,859,82,61,165,152,255,249,42,484,584,2,315,226,983,637,697,257,453,304,308,365,861,987,843,437,881,614,523,817,24,174,669,511,956,789,52,232,42,445,573,467,93,636,423,193,362,724,978,316,625,733,835,727,946,31,912,796,25,224,170,634,535,403,731,304,73,276,899,929,792,724,225,351,907,799,726,937,536,482,354,632,669,735,417,963,281,987,52,760,567,975,252,416,291,996,911,419,252,966,570,973,919,371,126,285,652,748,190,448,929,742,461,677,590,849,35,350,375,270,588,133,517,930,266,377,224,335,718,275,879,931,276,963,467,709,427,559,701,963,187,857,618,604,462,285,835,225,71,436,478,150,674,776,839,897,844,691,478,249,979,764,739,632,639,99,12,63,333,323,283,591,350,117,671,65,542,921,530,665,977,889,558,626,887,514,373,61,687,348,778,770,912,690,941,735,607,803,671,76,912,563,924,252,722,658,973,985,479,626,723,210,160,981,571,443,879,869,876,848,653,957,6,649,3,701,737,181,153,407,807,442,920,44,10,520,594,167,474,703,980,0,961,536,745,260,653,464,501,254,568,742,220,573,540,389,646,861,684,190,735,706,896,323,217,566,847,373,395,657,476,478,209,318,111,368,339,668,874,618,628,540,405,55,781,120,688,884,40,681,415,189,345,351,251,16,197,217,569,870,835,808,585,786,625,553,266,223,919,476,153,553,646,606,252,158,517,67,52,995,996,446,921,904,694,363,197,75,375,694,429,640,962,939,815,723,651,562,743,781,271,942,265,257,863,770,844,91,626,44,317,675,476,353,737,229,363,816,649,139,363,61,838,67,417,879,477,930,61,206,512,742,887,287,861,960,22,222,161,989,947,843,557,735,853,697,240,449,40,302,914,218,662,303,163,203,424,75,505,527,512,588,887,140,531,307,643,798,86,346,450,867,273,72,357,680,780,60,154,930,764,31,509,283,225,649,856,711,183,315,410,917,910,180,22,908,744,749,929,592,35,312,206,44,763,202,206,534,559,797,706,665,251,270,672,513,438,325,417,156,321,93,531,552,345,499,958,97,322,561,476,571,194,811,679,411,522,772,981,199,525,679,43,323,509,210,97,768,31,623,76,505,950,159,82,754,767,686,86,301,842,45,874,380,361,141,472,885,455,434,773,167,583,571,815,722,770,574,129,845,453,405,904,981,421,153,435,617,230,625,343,723,780,95,706,534,31,10,556,23,167,139,508,467,135,511,61,21,509,45,624,648,340,644,350,637,655,523,385,480,61,798,15,791,347,384,301,624,995,954,831,193,373,285,308,504,527,479,8,41,181,776,377,88,312,712,822,211,607,344,528,972,430,706,396,883,362,894,112,883,801,351,463,669,908,328,730,654,526,205,965,354,62,468,99,33,630,199,872,989,682,352,913,718,526,281,142,564,226],
               ]:
    print(f'ratings = {ratings}')
    sol = Solution()
    r = sol.candy(ratings)
    print(f'r = {r}')
    print('====================')

