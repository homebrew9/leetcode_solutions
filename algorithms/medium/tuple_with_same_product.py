from typing import List
from collections import defaultdict
import math
class Solution:
    def tupleSameProduct(self, nums: List[int]) -> int:
        hsh = defaultdict(list)
        N = len(nums)
        for i in range(N):
            for j in range(i+1, N):
                hsh[nums[i] * nums[j]] += [(i, j)]
        res = 0
        for k, v in hsh.items():
            res += 8 * math.comb(len(v), 2)
        return res

# Main section
for nums in [
               [2,3,4,6],
               [1,2,4,5,10],
               [1,2,3,4,6,12],
               [1,2,3,4,6,12,24],
               [1,2,3,4,6,12,24,48],
               [893,184,736,510,114,403,19,560,336,102,530,25,955,813,27,400,276,236,717,846,619,345,340,310,108,633,691,341,289,848,927,474,923,133,433,390,737,871,418,574,763,616,85,902,552,402,547,979,58,227,696,792,988,762,845,572,726,946,410,801,981,712,3,258,824,690,513,111,788,703,958,862,578,577,711,807,44,23,324,883,246,216,650,876,36,417,59,15,959,192,325,145,680,52,347,245,502,850,169,288,9,584,809,141,94,938,135,870,176,181,984,702,556,963,986,41,342,580,787,672,800,725,212,492,482,358,218,445,920,780,321,660,503,158,126,354,964,384,739,335,814,557,437,35,518,912,795,423,827,166,951,338,97,551,185,538,630,757,882,274,493,333,941,34,966,974,676,593,168,501,308,682,4,225,665,297,888,112,476,307,70],
            ]:
    print(f'nums = {nums}')
    sol = Solution()
    r = sol.tupleSameProduct(nums)
    print(f'r = {r}')
    print('=================')

