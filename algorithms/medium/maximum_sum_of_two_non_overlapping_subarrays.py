from typing import List

class Solution:
    def maxSumTwoNoOverlap(self, nums: List[int], firstLen: int, secondLen: int) -> int:
        def get_max_sum(arr, k):
            ans = 0
            total = 0
            for i in range(len(arr)):
                if i < k:
                    total += arr[i]
                else:
                    ans = max(ans, total)
                    total += arr[i] - arr[i - k]
            ans = max(ans, total)
            return ans
        N = len(nums)
        curr = 0
        res = float('-inf')
        for i in range(N):
            if i < firstLen:
                curr += nums[i]
            else:
                res = max(res, curr + get_max_sum(nums[:i - firstLen], secondLen))
                res = max(res, curr + get_max_sum(nums[i:], secondLen))
                curr += nums[i] - nums[i - firstLen]
        res = max(res, curr + get_max_sum(nums[:-firstLen], secondLen))
        return res

# Main section
for nums, firstLen, secondLen in [
         ([0,6,5,2,2,5,1,9,4], 1, 2),
         ([3,8,1,3,2,1,8,9,0], 3, 2),
         ([2,1,5,6,0,9,5,0,3,8], 4, 3),
         ([43,51,38,55,8,15,18,34,91,0,42,14,100,69,41,24,8,75,96,64,71,61,63,88,76,59,28,47,63,73,24,38,46,48,30,70,24,62,10,87,41,8,16,41,37,55,56,98,8,66,85,1,7,78,57,50,90,18,5,28,13,26,15,43,33,35,71,100,2,71,63,75,29,23,74,12,46,23,92,51,55,26,47,94,4,41,26,68,11,10,85,94,23,34,11,8,38,3,10,3,33,87,44,30,20,48,59,27,58,78,4,88,19,8,70,7,62,29,15,59,47,73,85,65,11,41,82,78,53,9,0,64,95,90,86,70,55,66,99,65,11,52,70,92,94,6,78,98,41,77,0,83,75,12,41,67,55,14,57,23,27,8,98,88,81,61,61,37,100,39,17,46,25,36,21,75,20,3,16,30,52,76,83,96,4,97,51,76,86,58,12,57,87,32,81,62,49,93,12,51,9,5,8,20,23,97,85,83,28,31,56,3,0,63,42,7,66,89,98,53,71,54,21,71,84,51,66,91,57,14,80,48,94,96,82,54,12,37,42,27,12,14,9,51,92,100,94,19,85,48,27,46,75,80,89,76,55,33,27,35,11,84,82,51,36,16,47,95,68,11,47,84,42,14,28,76,2,12,96,98,76,78,68,41,24,23,95,96,48,96,14,89,48,4,48,69,73,72,56,4,19,30,94,11,5,47,42,82,34,19,26,70,9,52,27,98,16,60,14,34,67,68,99,76,95,65,63,17,80,68,63,50,93,6,36,76,74,42,23,3,42,40,99,34,84,67,37,64,12,46,25,97,81,49,10,0,15,69,33,74,75,0,47,3,46,24,13,23,24,84,93,16,18,27,61,84,15,99,64,56,39,1,20,63,69,36,79,38,2,39,22,93,53,20,78,92,85,46,22,12,69,98,76,55,91,20,99,29,20,33,8,62,24,76,51,90,8,43,37,94,76,61,30,33,95,56,2,28,54,34,51,58,76,43,60,65,82,77,65,6,91,95,100,99,97,17,32,22,89,90,99,81,48,87,32,73,0,36,41,58,60,4,56,68,51,99,52,52,80,30,17,32,93,41,67,24,88,42,98,75,5,5,36,43,88,67,35,38,53,28,84,8,62,32,33,41,94,14,7,76,44,63,82,25,89,70,83,97,53,19,15,12,82,69,15,82,89,89,27,31,23,44,34,76,10,69,13,35,91,75,93,32,65,24,53,69,35,15,6,26,88,42,61,74,75,6,33,94,1,25,60,71,47,60,72,50,60,14,18,9,0,37,74,2,33,18,66,83,70,77,54,66,34,95,78,7,65,75,76,84,33,36,90,100,96,95,81,12,71,4,66,17,41,20,100,39,2,67,96,6,32,19,25,75,55,84,40,62,36,94,69,44,64,82,96,57,40,28,2,40,71,84,74,40,69,44,30,88,8,12,29,44,97,95,86,81,13,100,89,54,25,31,52,34,71,53,10,80,4,26,32,29,11,9,90,30,5,0,28,27,71,40,79,63,17,88,81,13,22,55,58,0,29,9,54,78,26,26,72,86,35,86,66,89,78,95,93,90,8,97,61,64,56,47,12,93,81,45,36,77,47,39,97,59,94,86,15,29,46,1,46,18,69,62,98,87,84,98,93,26,93,33,6,29,95,6,68,77,27,65,26,44,16,60,14,8,29,49,47,89,46,86,2,91,29,78,85,96,7,46,76,26,64,91,24,69,63,51,82,13,76,27,19,43,37,10,64,93,99,68,17,32,80,22,33,31,70,99,18,68,88,7,78,51,46,42,38,22,73,95,51,14,21,6,48,57,68,52,96,11,19,80,56,23,65,9,14,75,26,27,20,45,38,62,96,30,16,41,23,72,76,8,67,36,17,71,37,44,49,26,78,43,48,79,28,8,32,2,45,77,10,1,64,36,92,31,11,69,81,29,54,56,6,98,35,18,53,16,66,77,30,68,86,58,13,28,56,9,17,30,1,23,87,8,100,89,59,94,51,42,87,10,2,73,68,100,85,98,0,43,88,64,47,9,38,30,74,16,1,76,60,38,38,71,2,57,28,18,98,98,91,43,68,39,17,79,52,67,39,74,38,49,3,77,36,59,88,55,86,70,52,6,37,61,68,2,70,6,36,75,78,98,61,82,67,63,27,1,33,91,15,26,1,6,55,42,90,71,86,79,64,60,53,28,85,80,94,27,79,38,73,13,61,74,15,85,19,70,21,39,6,7,13,80,89,63,43,86,21,40,70,99,82,53,85,46,91,38,10,92], 3, 3),
    ]:
    print(f'nums, firstLen, secondLen = {nums}, {firstLen}, {secondLen}')
    sol = Solution()
    r = sol.maxSumTwoNoOverlap(nums, firstLen, secondLen)
    print(f'r = {r}')
    print('====================')


