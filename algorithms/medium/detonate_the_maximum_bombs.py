import math
from collections import defaultdict
from typing import List

class Solution:
    def maximumDetonation(self, bombs: List[List[int]]) -> int:
        def canDetonate(arr1, arr2):
            # Return true if bomb1 (arr1) can detonate bomb2 (arr2)
            x1, y1, r1 = arr1
            x2, y2, _ = arr2
            return r1 >= math.sqrt((x1-x2)*(x1-x2) + (y1-y2)*(y1-y2))
        def dfs(i):
            if i not in self.hsh:
                return
            for x in self.hsh[i]:
                if x not in self.visited:
                    self.visited.add(x)
                    dfs(x)
        N = len(bombs)
        self.hsh = defaultdict(list)
        for i in range(N):
            for j in range(N):
                if i != j:
                    if canDetonate(bombs[i], bombs[j]):
                        self.hsh[i] += [j]
        print(f'\thsh = {self.hsh}')
        res = float('-inf')
        for i in range(N):
            self.visited = set([i])
            dfs(i)
            res = max(res, len(self.visited))
        return res

# Main section
for bombs in [
                #[[2,1,3],[6,1,4]],
                #[[1,1,5],[10,10,5]],
                [[1,2,3],[2,3,1],[3,4,2],[4,5,3],[5,6,4]],
                #[[93,74,70],[49,63,50],[52,87,4],[34,38,33],[83,24,91],[56,36,1],[19,82,6],[100,29,77],[83,41,30],[94,43,32],[93,47,61],[48,40,54],[53,34,58],[23,27,16],[28,45,43],[82,57,63],[59,54,18],[6,40,31],[13,36,2],[37,84,6]],
                #[[80,54,5],[38,24,76],[81,4,3],[26,23,39],[45,5,60],[6,15,1],[73,61,100],[29,67,9],[39,41,95],[52,28,56],[62,63,18],[26,18,67],[7,39,64],[97,4,7],[73,44,81],[50,50,81],[2,36,93],[3,80,69],[40,66,28],[8,79,76],[12,88,72],[86,2,87],[63,60,88],[62,21,63],[98,29,68],[33,79,67],[77,20,7],[98,73,4],[18,66,36],[39,30,25],[78,81,48],[42,75,32],[28,56,17],[40,16,97],[76,89,37],[90,52,87],[31,80,43],[15,48,7],[36,62,82],[92,60,49],[12,44,31],[15,49,6],[89,3,74],[48,41,92],[69,97,37],[90,24,34],[70,99,10],[88,45,81],[89,81,91],[93,4,55],[41,13,14],[34,32,74],[2,40,38],[3,100,1],[37,10,35],[21,84,73],[54,68,20],[22,9,29],[45,51,2],[43,56,79],[76,47,53],[28,55,89],[100,54,89],[47,43,3],[92,1,6],[33,15,19],[11,71,15],[8,51,12],[47,30,83],[77,12,32],[46,4,78],[99,81,64],[94,66,15],[87,15,12],[65,2,56],[71,74,48],[27,30,62],[1,54,91],[12,33,19],[35,10,5],[31,81,76],[15,38,74],[18,68,21],[71,94,75],[100,52,65],[78,90,46],[28,94,90],[92,23,22],[19,78,76],[98,89,69],[39,76,3],[54,14,65],[100,41,100],[40,12,65],[56,4,50],[100,74,95],[84,95,64],[11,4,89],[69,100,52],[51,39,72]],
                #[[8,16,42],[81,97,67],[50,52,11],[48,47,52],[58,1,22],[38,54,31],[76,86,79],[89,18,56],[64,90,70],[68,37,69],[56,52,58],[68,47,100],[42,34,46],[88,4,14],[8,3,25],[16,33,9],[83,23,43],[59,98,69],[65,84,31],[40,25,87],[90,19,62],[37,8,99],[4,17,3],[93,82,86],[56,53,23],[38,70,55],[47,18,95],[4,92,55],[47,15,34],[19,39,47],[47,42,19],[97,70,53],[98,69,36],[92,19,38],[75,47,80],[64,71,25],[59,22,38],[61,28,37],[54,91,39],[67,60,83],[58,27,72],[32,33,24],[72,11,73],[96,40,88],[61,62,21],[32,62,14],[54,18,74],[30,39,89],[98,65,84],[51,24,97]],
             ]:
    print(f'bombs = {bombs}')
    sol = Solution()
    r = sol.maximumDetonation(bombs)
    print(f'r = {r}')
    print('====================')

